<section style="position:fixed;top:0;width:100%;height:100vh;display:flex;background: #0000009c;
z-index: 9;" *ngIf="subiendo">
  <p class=" mx-auto my-auto text-white text-center">
    <i class="fa fa-gear" id="spinner"></i>
    <br>
    Optimizando...
  </p>
</section>
<app-nav-top></app-nav-top>
<section style="padding-top:8vh;">
  <div class="container pt-3 cont">
    <div class="row">
      <div class="col-md-6 col-6">
        <div class="row tarjeta-i mx-2 cp" *ngIf="!isCaptura"
          (click)="isCaptura = true;isPublicacion = false;imagen.length=0;isFoto = false">
          <div class="col-md-4 d-flex">
            <div class="my-auto mx-auto">
              <img src="/assets/7.png" style="width: 40px;position: relative;left: calc(70% - 40px);">
              <p class="mb-0 text-center" style="font-size: 11px;">Nueva captura
              <br>
                <b>¡Sumás 10 puntos!</b>
            </p>
            </div>
          </div>
          <div class="col-md-8 d-flex" *ngIf="!isMobile">
            <div class="my-auto mr-auto">
              <p class="my-0"><b>Agregar nueva captura</b></p>
            </div>
          </div>
        </div>
        <div class="row tarjeta-i cp mx-2 text-white"
          style="background-image: linear-gradient(to right, #6a83ff,#83a4ff);" *ngIf="isCaptura"
          (click)="isCaptura = false;">
          <div class="col-md-4 d-flex">
            <div class="my-auto mx-auto">
              <img src="/assets/7.png" style="width: 40px;position: relative;left: calc(70% - 40px);filter: invert(1);">
              <p style="font-size: 11px;">Nueva captura</p>
            </div>
          </div>
          <div class="col-md-8 d-flex" *ngIf="!isMobile">
            <div class="my-auto mr-auto">
              <p class="my-0"><b>Agregar nueva captura</b></p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-6">
        <div class="row tarjeta-i cp mx-2"
          (click)="isPublicacion = true; isCaptura = false;imagen.length=0;isFoto = false" *ngIf="!isPublicacion">
          <div class="col-md-4 d-flex">
            <div class="my-auto mx-auto">
                <img src="/assets/8.png" style="width: 40px;position: relative;left: calc(70% - 40px);">
                <p style="font-size: 11px;">Nueva publicación</p>
            </div>
          </div>
          <div class="col-md-8 d-flex" *ngIf="!isMobile">
            <div class="my-auto mr-auto">
              <p class="my-0"><b>Agregar nueva publicación</b></p>
            </div>
          </div>
        </div>
        <div class="row tarjeta-i mx-2 text-white cp"
          style="background-image: linear-gradient(to right, #6a83ff,#83a4ff);" *ngIf="isPublicacion"
          (click)="isPublicacion = false">
          <div class="col-md-4 d-flex">
            <div class="my-auto mx-auto">
                <img src="/assets/8.png" style="width: 40px;position: relative;left: calc(70% - 40px);filter:invert(1)">
                <p style="font-size: 11px;">Nueva publicación</p>  
            </div>
          </div>
          <div class="col-md-8 d-flex" *ngIf="!isMobile">
            <div class="my-auto mr-auto">
              <p class="my-0"><b>Agregar nueva publicación</b></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row" style="margin-bottom:5rem" *ngIf="isCaptura">
      <div class=" col-md-6 col-12 d-flex pt-5" id="contenedor-img">
        <div class="mx-auto my-auto" *ngIf="isFoto" id="img" style="height: 100%">

        </div>
        <div class="mx-auto my-auto" style="height: 100%" *ngIf="!isFoto && !isMobile">

          <label class="labelFile text-center mx-auto" id="labelFile">
            <i class="material-icons">photo_camera</i>
            <input type="file" id="upload-file" (change)="seleccionarFoto($event)" accept='image/*' capture>
          </label>
        </div>
        <div class="mx-auto my-auto" *ngIf="!isFoto && isMobile">
          <label class="labelFile text-center mx-auto" id="labelFile">
            <i class="material-icons">photo_camera</i>
            
            <input type="file" id="upload-file"  (change)="seleccionarFoto($event)" accept="image/*" capture>
          </label>
        </div>

        <button
          style="position:absolute;top:60px;left:0px;background-image: linear-gradient(to right,#3176fb,#45c3ff);border:0;border-radius:5px;padding:10px 34px;color:white"
          *ngIf="isFoto" (click)="BorrarImagen()">Cambiar foto</button>
      </div>
      <div class="col-md-6 pt-5 col-12">
        <div id="formulario">
          <p><b>Nueva captura</b></p>
          <p>
            <textarea placeholder="Escribí una descripcion de la foto" name="sd"
              [(ngModel)]="cliente.Capturas.descripcion"></textarea>
          </p>
          <p><input type="text" placeholder="¿Que pescado es?" name="sd" [(ngModel)]="cliente.Capturas.pescado"></p>
          <p><input type="text" placeholder="¿Cuanto pesa?" [(ngModel)]="cliente.Capturas.peso"></p>
          <p><input type="text" placeholder="¿Como lo pescaste?" name="sd" [(ngModel)]="cliente.Capturas.forma"></p>
          <p><input type="text" placeholder="¿Donde fue pescado?" name="sd" [(ngModel)]="cliente.Capturas.donde"></p>
          <p class="text-danger" *ngIf="isProblema"> ¡No podes agregar una captura sin agregar la información!</p>
          <p><button (click)="agregarPublicacion()">Publicar captura</button></p>
          <p><b>¡Con esta captura estarías sumando 10 puntos!</b></p>
        </div>
      </div>
    </div>
    <div class="row" *ngIf="isPublicacion" style="margin-bottom:5rem">
      <div class="col-md-6 d-flex pt-5" id="contenedor-img">
        <div class="mx-auto my-auto" *ngIf="isFoto" id="img" style="height: 100%">

        </div>
        <div class="mx-auto my-auto" style="height: 100%" *ngIf="!isFoto">
          <label class="labelFile text-center mx-auto" id="labelFile">
            <i class="material-icons">photo_camera</i>
            <input type="file" id="upload-file" (change)="seleccionarFoto($event)" accept='image/*' capture>
          </label>
        </div>
        <button
          style="position:absolute;top:60px;left:0px;background-image: linear-gradient(to right,#3176fb,#45c3ff);border:0;border-radius:5px;padding:10px 34px;color:white"
          *ngIf="isFoto" (click)="BorrarImagen()">Cambiar foto</button>
      </div>
      <div class="col-md-6 pt-5">
        <div id="formulario">
          <p><b>Nueva publicación</b></p>
          <p>
            <textarea placeholder="Escribí una descripcion de la foto" name="sd"
              [(ngModel)]="cliente.Publicacion.descripcion"></textarea>
          </p>

          ¿Estabas con alguien?<input type="checkbox" class="ml-3" style="width:auto"
            placeholder="¿Estabas con alguien?" (click)="etiqueta1 = (etiqueta1 === true) ? false : true">
          <p class="mb-0" *ngIf="etiqueta1"><input type="text" placeholder="¿Con quien estabas?" name="sd"
              (keyup)="filtrar($event.target.value)" [(ngModel)]="cliente.Publicacion.etiqueta"></p>
          <div *ngIf="listadoFiltrado.length !== 0" style="    position: absolute;
        background: white;
        width: 90%;
        box-shadow: 1px 1px 1px 1px gainsboro;
        padding: 10px;
        border-radius: 5px;">
            <p class="my-2" *ngFor="let x of listadoFiltrado">
              <a (click)="agregarEtiqueta(x)">{{x.Nick}}</a>
            </p>
          </div>
          <p class="text-danger" *ngIf="isProblema"> ¡No podes agregar una captura sin agregar la información!</p>
          <p class="mt-2"><button (click)="agregar()">Agregar Publicación</button></p>
        </div>
      </div>
    </div>
  </div>
</section>
<section class="popup" *ngIf="ErrorImg">
  <div style="background: white;
  height: 200px;
  padding: 35px;
  margin: auto;
  border-radius: 8px;">
    <h2>¡Ups! Ha surgido un error</h2>
    <p>La imagen que estas tratando de subir es muy pesada.</p>
    <p>Por favor, intentá renderizarla, o buscá otra.</p>
    <p class="text-center"><button (click)="ErrorImg = false;">¡Entendido!</button></p>
  </div>
</section>



<div class="popup-carga d-flex" *ngIf="isCarga">
  <div class="mx-auto my-auto text-white">
    <div class="text-center">
      <i class="fa fa-gear" id="spinner"></i>
    </div>
    <p>Publicando...</p>
  </div>
</div>
<app-navbar></app-navbar>